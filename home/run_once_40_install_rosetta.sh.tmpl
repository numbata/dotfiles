#!/bin/bash

set -euo pipefail

# Only needed on Apple Silicon
if [[ "$(uname -m)" != "arm64" ]]; then
  echo "Not Apple Silicon, skipping Rosetta."
  exit 0
fi

# Check if already installed
if /usr/bin/pgrep -q oahd; then
  echo "Rosetta 2 already installed."
  exit 0
fi

echo "Installing Rosetta 2..."
/usr/sbin/softwareupdate --install-rosetta --agree-to-license
echo "Rosetta 2 installed."
